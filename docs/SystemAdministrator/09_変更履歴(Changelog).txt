================================================================================
  Claude-EdgeChromeDevTools 変更履歴
  Changelog
================================================================================

【バージョン履歴】

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ v1.2.0 (2026-02-06) - セキュリティ・安定性・パフォーマンス向上リリース
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【セキュリティ強化】
  🔒 SSH引数エスケープ機能実装
     - Escape-SSHArgument 関数追加
     - 全SSH呼び出しでコマンドインジェクション対策 (Edge: 8箇所, Chrome: 7箇所)
     - プロジェクト名の特殊文字・スペース・メタ文字を安全にエスケープ

  🛡️ config.json検証機能
     - 必須フィールド検証 (ports, zDrive, linuxHost, linuxBase, edgeExe, chromeExe)
     - ポート番号妥当性チェック (1024-65535範囲)
     - 起動前の設定ファイル整合性確認

【安定性向上】
  ✨ エラー時自動クリーンアップ機構
     - trap ハンドラー実装
     - スクリプトエラー時にブラウザプロセスを自動終了
     - Linux側ポートを自動解放 (fuser -k)
     - グローバル変数によるリソース追跡

  ✨ SSH事前接続テスト
     - ブラウザ起動前にSSH到達性確認
     - 接続失敗時のユーザーフレンドリーなエラーメッセージ
     - 解決手順の自動提示 (詳細ログコマンド等)

【UX改善】
  ✨ 入力検証強化
     - ブラウザ選択: 無効入力時のリトライループ + エラーメッセージ
     - プロジェクト選択: 範囲外・非数値入力の検証
     - 有効範囲の明示的表示

【パフォーマンス】
  ⚡ HTTP呼び出し最適化
     - DevTools /json/version エンドポイントの重複取得を削除
     - レスポンス再利用により50%削減 (2回→1回)

  ⚡ config.json駆動設定生成
     - claudeCodeセクションを動的読み取り
     - ハードコード削減、設定変更の柔軟性向上

  ⚡ SSH操作のバッチ化 (進行中)
     - 複数SSH接続を単一リモートスクリプトに統合
     - 接続オーバーヘッド削減

【バグ修正】
  🐛 Edge版: .mcp.jsonバックアップ欠落を修正
     - Chrome版と同等の機能追加
     - タイムスタンプ付きバックアップ生成

  🐛 Edge版: 重複バナー表示を削除
     - 古い "Claude Edge DevTools" 固定バナーを削除
     - 重複ブラウザ存在チェックを削除

【既知の問題】
  - なし

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ v1.1.0 (2026-02-06)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【新機能】
  ✨ Agent Teams機能の統合
     - CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS環境変数の自動設定
     - run-claude.shテンプレートへのexport追加

  ✨ Claude Code設定の中央管理 (claudeCodeセクション)
     - config.jsonにclaudeCodeセクション追加
     - env: 環境変数の一元管理
     - settings: UI/動作設定の一元管理

  ✨ グローバル設定の包括的自動適用
     - Linux側 ~/.claude/settings.json への全設定自動マージ
     - jqマージパターンによる安全な設定更新
     - 既存permissions, plugins, hooksの保持

【改善】
  🔧 INIT_PROMPT heredoc方式への移行
     - bash double-quoted stringからheredocに変更
     - INIT_PROMPT=$(cat << 'INITPROMPTEOF' ... INITPROMPTEOF) 形式
     - バッククォート・二重引用符による破損リスクを排除

  🔧 base64 SSH転送の統一
     - Edge版スクリプトもChrome版と同じbase64エンコーディングを使用
     - 日本語文字・JSON特殊文字の安全な転送を保証

  🔧 新環境変数の追加
     - ENABLE_TOOL_SEARCH
     - CLAUDE_AUTOCOMPACT_PCT_OVERRIDE
     - CLAUDE_CODE_ENABLE_PROMPT_SUGGESTION

【バグ修正】
  🐛 INIT_PROMPT bash引用符バグの修正（重大）
     - bashのdouble-quoted string内のバッククォートがコマンド置換として
       解釈される問題を修正
  🐛 Edge版SSH実行方法の不整合修正
     - 直接SSH実行からbase64方式に統一

【既知の問題】
  - なし

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ v1.0.0 (2025-02-01)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【新機能】
  ✨ ファイル構造の整理
     - scripts/main/ にメインスクリプトを移動
     - scripts/setup/ にセットアップスクリプトを移動
     - scripts/test/ にテストスクリプトを移動
     - config/ に設定ファイルを移動
     - docs/ ドキュメントフォルダを新規作成

  ✨ 包括的なドキュメント追加
     - 01_プロジェクト概要(Project-Overview).txt
     - 02_セットアップガイド(Setup-Guide).txt
     - 03_使用方法(Usage-Guide).txt
     - 04_設定ファイル詳細(Configuration-Details).txt
     - 05_トラブルシューティング(Troubleshooting).txt
     - 06_開発ガイド(Development-Guide).txt
     - 07_アーキテクチャ(Architecture).txt
     - 08_FAQ.txt
     - 09_変更履歴(Changelog).txt
     - 10_ライセンス(License).txt
     - 11_コマンドリファレンス(Command-Reference).txt
     - 12_環境変数(Environment-Variables).txt

  ✨ 初期プロンプトのカスタマイズ
     - GitHub/GitHub Actions統合を前提とした新しい初期プロンプト
     - SubAgent/Hooks/Git WorkTree/MCP機能のフル活用を指示
     - Git/GitHub操作ポリシーの明確化

【改善】
  🔧 パス管理の改善
     - すべてのスクリプトが新しいディレクトリ構造に対応
     - 相対パス参照の最適化

  🔧 保守性の向上
     - ファイルの論理的な分類
     - ドキュメントの充実化

【既知の問題】
  - なし

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ v0.9.0 (2025-01-31)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【新機能】
  ✨ Statusline機能の実装
     - カレントディレクトリ、Gitブランチ、モデル名の表示
     - コンテキスト使用率のプログレスバー表示
     - jq自動インストール機能

  ✨ .mcp.json自動バックアップ
     - タイムスタンプ付きバックアップファイル生成

【改善】
  🔧 Chrome版スクリプトの最適化
     - デフォルトブラウザをChromeに変更
     - ログ出力の改善（PORT表示、MCP_CHROME_DEBUG_PORT確認）

【バグ修正】
  🐛 Statusline設定の反映漏れ修正
     - グローバル設定とプロジェクト設定の両方を更新

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ v0.8.0 (2025-01-30)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【新機能】
  ✨ 中央集約設定ファイル（config.json）の導入
     - すべての設定を1ファイルで管理
     - ポート配列による柔軟な設定

  ✨ ポート自動選択機能
     - Get-AvailablePort関数による空きポート検出
     - 複数プロジェクト同時実行のサポート

  ✨ ブラウザ選択UI
     - Edge/Chromeを実行時に選択可能
     - デフォルトブラウザの設定

  ✨ Windows Terminal自動設定
     - setup-windows-terminal.ps1 の追加
     - 最適なプロファイル設定の自動生成

【改善】
  🔧 DevTools Preferences事前設定（Edge版）
     - キャッシュ無効化
     - ログ保持
     - タイムスタンプ表示
     - ポップアップ自動DevTools起動

  🔧 エラーハンドリングの強化
     - 詳細なエラーメッセージ
     - リトライロジックの追加

【バグ修正】
  🐛 ポート衝突時のクラッシュ修正
  🐛 UTF-8エンコーディング問題の修正

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ v0.7.0 (2025-01-29)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【新機能】
  ✨ start.bat対話型ランチャーの追加
     - メニュー駆動インターフェース
     - スクリプト選択の簡易化
     - Windows Terminal自動起動対応

  ✨ テストスクリプトの追加
     - test-edge.ps1: Edge DevTools接続テスト
     - test-chrome.ps1: Chrome DevTools接続テスト
     - バージョン情報の自動取得

【改善】
  🔧 ユーザーインターフェースの改善
     - 絵文字による視認性向上
     - プログレスメッセージの追加
     - 区切り線による整形

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ v0.6.0 (2025-01-28)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【新機能】
  ✨ Chrome版スクリプトの追加
     - Claude-ChromeDevTools-Final.ps1
     - Edge版と同等の機能をChromeで実現

  ✨ プロファイル隔離機能
     - ブラウザごと・ポートごとの専用プロファイル
     - プロセスクリーンアップの自動化

【改善】
  🔧 SSH接続オプションの最適化
     - ControlMaster無効化
     - 接続安定性の向上

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ v0.5.0 (2025-01-27)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【新機能】
  ✨ run-claude.sh動的生成機能
     - プロジェクトルートに自動生成
     - ポート番号の自動埋め込み
     - UTF-8 (BOM無し) + LF改行の確保

  ✨ 初期プロンプト自動入力
     - echo "$INIT_PROMPT" | claude パイプライン
     - 日本語対応指示の自動化

【改善】
  🔧 DevTools接続確認の強化
     - curlによるHTTPレスポンステスト
     - 最大10回のリトライロジック
     - タイムアウト設定（2秒）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ v0.4.0 (2025-01-26)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【新機能】
  ✨ SSHリモートポートフォワーディング
     - -R オプションによる双方向通信
     - DevToolsプロトコルのトンネリング

  ✨ 環境変数の自動設定
     - CLAUDE_CHROME_DEBUG_PORT
     - MCP_CHROME_DEBUG_PORT

【改善】
  🔧 Linux側ポートクリーンアップ
     - fuser -k による既存プロセス終了

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ v0.3.0 (2025-01-25)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【新機能】
  ✨ DevTools起動待機ロジック
     - 最大15秒の待機
     - ポートリスニング確認
     - /json/version エンドポイントテスト

  ✨ バージョン情報の取得
     - Browser名、Protocol-Version、V8-Versionの表示

【バグ修正】
  🐛 ブラウザ起動タイミングの問題修正

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ v0.2.0 (2025-01-24)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【新機能】
  ✨ プロジェクト選択UI
     - Zドライブディレクトリの自動リスト化
     - 番号入力による選択

  ✨ ブラウザリモートデバッグモード起動
     - --remote-debugging-port オプション
     - --user-data-dir による専用プロファイル

【改善】
  🔧 エラーメッセージの改善

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
■ v0.1.0 (2025-01-23) - 初回リリース
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【新機能】
  ✨ 基本的なスクリプト構造
     - PowerShell による自動化
     - SSH接続機能
     - 基本的なエラーハンドリング

【ドキュメント】
  📚 GEMINI.md の作成
     - プロジェクト概要
     - 主要ファイルの説明
     - 実行方法

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【今後の予定】

■ v1.1.0（予定）
  - [ ] README.md の追加
  - [ ] .gitignore の追加
  - [ ] GitHub Actions CI/CD パイプライン
  - [ ] 自動テストスイート

■ v1.2.0（予定）
  - [ ] Firefox サポート
  - [ ] 非対話型モード（CI/CD対応）
  - [ ] ログファイル出力機能

■ v1.3.0（予定）
  - [ ] GUI版ランチャー（WPF/Electron）
  - [ ] プロジェクトプリセット機能
  - [ ] カスタムスクリプトフック

■ v2.0.0（予定）
  - [ ] Docker環境サポート
  - [ ] クロスプラットフォーム対応（macOS）
  - [ ] プラグインアーキテクチャ

【メンテナンス方針】

- パッチバージョン (v1.0.x): バグ修正のみ
- マイナーバージョン (v1.x.0): 新機能追加、後方互換性維持
- メジャーバージョン (vx.0.0): 破壊的変更を含む大規模アップデート

【貢献者】
  - プロジェクトメンテナー
  - コミュニティ貢献者（今後追加予定）

【リンク】
  - プロジェクトリポジトリ: （追加予定）
  - Issue Tracker: （追加予定）
  - Discussions: （追加予定）
